<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>HeartBeats Results</title>
      <script src="https://cdn.tailwindcss.com"></script>

      <style>
         /* Fade + slide animation */
         .fade-up {
            opacity: 0;
            transform: translateY(10px);
            animation: fadeUp 0.6s ease-out forwards;
         }
         @keyframes fadeUp {
            to {
               opacity: 1;
               transform: translateY(0);
            }
         }

         /*Reflective*/
         @keyframes pulseGlow {
            0%,
            100% {
               box-shadow: 0 0 35px rgba(255, 0, 120, 0.4);
            }
            50% {
               box-shadow: 0 0 70px rgba(255, 70, 200, 0.9);
            }
         }

         .animate-pulse-glow {
            animation: pulseGlow 4s ease-in-out infinite;
         }

         /* Reflective sweep animation */
         .reflect {
            position: absolute;
            top: -50%;
            left: -100%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
               115deg,
               rgba(255, 255, 255, 0) 20%,
               rgba(255, 255, 255, 0.15) 45%,
               rgba(255, 255, 255, 0.35) 50%,
               rgba(255, 255, 255, 0.15) 55%,
               rgba(255, 255, 255, 0) 80%
            );
            transform: rotate(15deg);
            animation: shineMove 6s ease-in-out infinite;
         }

         @keyframes shineMove {
            0% {
               transform: translateX(-150%) rotate(15deg);
            }
            50% {
               transform: translateX(150%) rotate(15deg);
            }
            100% {
               transform: translateX(150%) rotate(15deg);
            }
         }
      </style>
   </head>

   <body class="bg-[#0c0c0e] text-white font-inter">
      <!-- Background Glow -->
      <div
         class="absolute inset-0 bg-gradient-to-br from-pink-500/10 via-purple-600/5 to-transparent blur-3xl"
      ></div>

      <div
         class="relative z-10 w-full min-h-screen flex flex-col lg:flex-row px-6 lg:px-12 py-8 gap-10 lg:gap-16"
      >
         <!-- LEFT SIDE â€” MOST SIMILAR -->
         <div class="w-full lg:w-1/3 flex flex-col fade-up gap-6">
            <h2 class="text-3xl font-semibold">Most Similar:</h2>

            <div
               class="w-full aspect-square p-6 rounded-3xl bg-gradient-to-br from-pink-500/40 via-purple-600/30 to-indigo-500/30 border border-pink-400/40 shadow-[0_0_50px_rgba(255,0,140,0.45)] backdrop-blur-xl flex flex-col justify-between animate-pulse-glow hover:scale-[1.02] transition-all duration-300"
            >
               <!-- reflective shine layer -->
               <div
                  class="absolute inset-0 pointer-events-none overflow-hidden"
               >
                  <div class="reflect"></div>
               </div>
               <!-- Track Title + Artist  -->
               <div class="flex flex-col items-start">
                  <p class="text-3xl font-bold leading-snug mb-2">
                     {{ results[0].track_title }}
                  </p>
                  <p class="text-gray-200 italic text-lg opacity-90 mb-auto">
                     {{ results[0].artist_name }}
                  </p>
               </div>

               <!-- Hearts Bottom Section -->
               <div class="flex items-center gap-1 mt-auto">
                  {% for _ in range(results[0].hearts.full) %}
                  <img
                     src="/static/full.png"
                     class="w-7 drop-shadow-[0_0_8px_rgba(255,0,120,0.8)]"
                  />
                  {% endfor %} {% if results[0].hearts.half %}
                  <img
                     src="/static/half.png"
                     class="w-7 drop-shadow-[0_0_8px_rgba(255,0,120,0.6)]"
                  />
                  {% endif %} {% for _ in range(results[0].hearts.empty) %}
                  <img src="/static/empty.png" class="w-7 opacity-30" />
                  {% endfor %}
               </div>
            </div>

            <div class="fade-up mt-12">
               <a
                  href="/"
                  class="w-48 py-6 rounded-xl text-lg font-semibold text-white bg-gradient-to-r from-pink-500 to-red-500 shadow-lg hover:scale-105 hover:shadow-[0_0_25px_rgba(255,80,110,0.6)] transition-all duration-300 text-center leading-tight block"
               >
                  Analyze Another<br />Song
               </a>
            </div>
         </div>

         <!-- RIGHT SIDE -->
         <div class="w-full lg:w-2/3 flex flex-col fade-up mt-10 lg:mt-0">
            <section class="flex justify-between items-center">
               <!-- HEADER BAR -->
               <div class="flex items-center gap-3">
                  <img src="/static/full.png" class="h-12" />
                  <p class="text-2xl font-semibold">HeartBeats</p>
               </div>

               <!-- GENRE BADGE -->
               {% if genre %}
               <div
                  class="fade-up bg-white/5 backdrop-blur-xl px-6 py-4 rounded-2xl border border-white/10 shadow-lg text-center flex flex-col items-center justify-center h-20 min-w-[160px]"
               >
                  <p class="text-gray-300 text-sm uppercase tracking-wide">
                     Estimated Genre
                  </p>
                  <p
                     class="text-xl font-semibold bg-gradient-to-r from-pink-400 to-red-400 bg-clip-text text-transparent"
                  >
                     {{ genre }}
                  </p>
               </div>
               {% endif %}
            </section>

            <!-- RECOMMENDATION LIST (SCROLLABLE) -->
            <h2 class="text-2xl font-semibold mb-4">Recommended Tracks</h2>
            <div
               class="scroll-area max-h-[80vh] overflow-y-auto pr-4 [scrollbar-width:none] [&::-webkit-scrollbar]:hidden pb-8"
            >
               <div
                  class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
               >
                  {% for row in results[1:] %}
                  <div
                     class="aspect-square rounded-2xl p-6 bg-gradient-to-br {{ gradients[loop.index0 % gradients|length] }} shadow-xl border border-white/10 hover:scale-105 hover:shadow-[0_0_40px_rgba(255,60,100,0.4)] transition duration-300 backdrop-blur-xl flex flex-col justify-between"
                  >
                     <p class="text-lg font-semibold mb-1">
                        {{ row.track_title }}
                     </p>
                     <p class="text-sm text-gray-200 italic mb-4">
                        {{ row.artist_name }}
                     </p>

                     <div class="flex items-center gap-1 mb-3">
                        {% for _ in range(row.hearts.full) %}
                        <img src="/static/full.png" class="w-5" />
                        {% endfor %} {% if row.hearts.half %}
                        <img src="/static/half.png" class="w-5" />
                        {% endif %} {% for _ in range(row.hearts.empty) %}
                        <img src="/static/empty.png" class="w-5 opacity-40" />
                        {% endfor %}
                     </div>
                  </div>
                  {% endfor %}
               </div>
            </div>
         </div>
      </div>
   </body>
</html>